#include <18F2550.h>
#fuses HS,NOWDT,NOPROTECT,NOLVP
#use delay(clock=20MHz)

// Definición de pines GPIO
#define LED1 PIN_B0
#define LED2 PIN_B1

void main() {
    // Configurar temporizador TMR1
    setup_timer_1(T1_INTERNAL | T1_DIV_BY_8); // Prescaler de 8
    set_timer1(3036); // Valor para interrupción cada 500 ms

    // Configurar temporizador TMR2
    setup_timer_2(T2_DIV_BY_16, 249, 1); // Prescaler de 16, periodo de 1 segundo

    // Configurar pines como salida
    set_tris_b(0x00);

    while (TRUE) {
        // Comprobar si el temporizador TMR1 ha desbordado (500 ms)
        if (get_timer1() >= 3036) {
            output_toggle(LED1); // Alternar estado del LED1
            set_timer1(3036); // Reiniciar temporizador TMR1
        }

        // Comprobar si el temporizador TMR2 ha desbordado (1 segundo)
        if (TMR2IF) {
            TMR2IF = 0; // Limpiar bandera de desbordamiento
            output_toggle(LED2); // Alternar estado del LED2
        }
    }
}

