CCS PCM C Compiler, Version 5.076, 56587               24-feb.-24 15:35

               Filename:   E:\U1A7. EJERCICIOS. Programación de PICs\Ejercicio 2 Conversión a Display de 7 Segmentos\Ejercicio 2 Conversión a Display de 7 Segmentos.lst

               ROM used:   131 words (2%)
                           Largest free fragment is 2048
               RAM used:   19 (5%) at main() level
                           21 (6%) worst case
               Stack used: 0 locations
               Stack size: 8

*
0000:  MOVLW  00
0001:  MOVWF  0A
0002:  GOTO   030
0003:  NOP
.................... #INCLUDE <16F877.h> 
.................... //////////// Standard Header file for the PIC16F877 device //////////////// 
.................... /////////////////////////////////////////////////////////////////////////// 
.................... ////        (C) Copyright 1996, 2014 Custom Computer Services          //// 
.................... //// This source code may only be used by licensed users of the CCS C  //// 
.................... //// compiler.  This source code may only be distributed to other      //// 
.................... //// licensed users of the CCS C compiler.  No other use, reproduction //// 
.................... //// or distribution is permitted without written permission.          //// 
.................... //// Derivative programs created using this software in object code    //// 
.................... //// form are not restricted in any way.                               //// 
.................... /////////////////////////////////////////////////////////////////////////// 
.................... #device PIC16F877 
0004:  MOVF   2E,W
0005:  CLRF   78
0006:  SUBWF  2D,W
0007:  BTFSC  03.0
0008:  GOTO   00C
0009:  MOVF   2D,W
000A:  MOVWF  77
000B:  GOTO   018
000C:  CLRF   77
000D:  MOVLW  08
000E:  MOVWF  2F
000F:  RLF    2D,F
0010:  RLF    77,F
0011:  MOVF   2E,W
0012:  SUBWF  77,W
0013:  BTFSC  03.0
0014:  MOVWF  77
0015:  RLF    78,F
0016:  DECFSZ 2F,F
0017:  GOTO   00F
0018:  RETURN
....................  
.................... #list 
....................  
.................... #FUSES HS, NOWDT, NOPROTECT, NOLVP 
.................... #USE delay(clock = 4000000) 
0019:  MOVLW  2D
001A:  MOVWF  04
001B:  BCF    03.7
001C:  MOVF   00,W
001D:  BTFSC  03.2
001E:  GOTO   02D
001F:  MOVLW  01
0020:  MOVWF  78
0021:  CLRF   77
0022:  DECFSZ 77,F
0023:  GOTO   022
0024:  DECFSZ 78,F
0025:  GOTO   021
0026:  MOVLW  4A
0027:  MOVWF  77
0028:  DECFSZ 77,F
0029:  GOTO   028
002A:  GOTO   02B
002B:  DECFSZ 00,F
002C:  GOTO   01F
002D:  BCF    0A.3
002E:  BCF    0A.4
002F:  GOTO   080 (RETURN)
....................  
.................... // Define la matriz para los números del 0 al 9 en el display de 7 segmentos 
.................... int display[10] = {0b00111111, // 0 
....................                    0b00000110, // 1 
....................                    0b01011011, // 2 
....................                    0b01001111, // 3 
....................                    0b01100110, // 4 
....................                    0b01101101, // 5 
....................                    0b01111101, // 6 
....................                    0b00000111, // 7 
....................                    0b01111111, // 8 
....................                    0b01101111  // 9 
....................                   }; 
*
0039:  MOVLW  3F
003A:  BCF    03.5
003B:  MOVWF  20
003C:  MOVLW  06
003D:  MOVWF  21
003E:  MOVLW  5B
003F:  MOVWF  22
0040:  MOVLW  4F
0041:  MOVWF  23
0042:  MOVLW  66
0043:  MOVWF  24
0044:  MOVLW  6D
0045:  MOVWF  25
0046:  MOVLW  7D
0047:  MOVWF  26
0048:  MOVLW  07
0049:  MOVWF  27
004A:  MOVLW  7F
004B:  MOVWF  28
004C:  MOVLW  6F
004D:  MOVWF  29
....................  
.................... void main() { 
*
0030:  MOVF   03,W
0031:  ANDLW  1F
0032:  MOVWF  03
0033:  BSF    03.5
0034:  BSF    1F.0
0035:  BSF    1F.1
0036:  BSF    1F.2
0037:  BCF    1F.3
0038:  BCF    03.7
....................     // Configura PORTA para leer los interruptores 
....................     set_tris_a(0b00111111); // RA0-RA5 como entradas 
*
004E:  MOVLW  3F
004F:  BSF    03.5
0050:  MOVWF  05
....................     set_tris_b(0x00);       // PORTB como salida para el display de las unidades 
0051:  MOVLW  00
0052:  MOVWF  06
....................     set_tris_d(0x00);       // PORTD como salida para el display de las decenas 
0053:  MOVWF  08
....................  
....................     while (TRUE) { 
....................         int valor = input_a() & 0x3F; // Lee los 6 bits de entrada (RA0-RA5) 
....................  
....................         int decena = valor / 10; // Calcula la decena 
....................         int unidad = valor % 10; // Calcula la unidad 
0054:  MOVLW  FF
0055:  MOVWF  05
0056:  BCF    03.5
0057:  MOVF   05,W
0058:  ANDLW  3F
0059:  MOVWF  2A
005A:  MOVWF  2D
005B:  MOVLW  0A
005C:  MOVWF  2E
005D:  CALL   004
005E:  MOVF   78,W
005F:  MOVWF  2B
0060:  MOVF   2A,W
0061:  MOVWF  2D
0062:  MOVLW  0A
0063:  MOVWF  2E
0064:  CALL   004
0065:  MOVF   77,W
0066:  MOVWF  2C
....................  
....................         // Muestra la decena en un display y la unidad en otro 
....................         output_b(display[unidad]); // Muestra las unidades en PORTB 
0067:  MOVLW  20
0068:  ADDWF  2C,W
0069:  MOVWF  04
006A:  BCF    03.7
006B:  MOVF   00,W
006C:  MOVWF  2D
006D:  BSF    03.5
006E:  CLRF   06
006F:  BCF    03.5
0070:  MOVF   2D,W
0071:  MOVWF  06
....................         output_d(display[decena]); // Muestra las decenas en PORTD 
0072:  MOVLW  20
0073:  ADDWF  2B,W
0074:  MOVWF  04
0075:  BCF    03.7
0076:  MOVF   00,W
0077:  MOVWF  2D
0078:  BSF    03.5
0079:  CLRF   08
007A:  BCF    03.5
007B:  MOVF   2D,W
007C:  MOVWF  08
....................  
....................         delay_ms(250); // Pequeño retardo para evitar parpadeos rápidos 
007D:  MOVLW  FA
007E:  MOVWF  2D
007F:  GOTO   019
0080:  BSF    03.5
0081:  GOTO   054
....................     } 
.................... } 
....................  
0082:  SLEEP

Configuration Fuses:
   Word  1: 3F72   HS NOWDT PUT BROWNOUT NOLVP NOCPD NOWRT NODEBUG NOPROTECT
