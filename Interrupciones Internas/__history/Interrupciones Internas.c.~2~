#include <18F4550.h>
#fuses NOWDT, PUT, BROWNOUT, NOLVP, NOCPD, NOPBADEN
#use delay(clock=1000000)

volatile int counter = 0; // Contador para la interrupción externa

#INT_TIMER1
void TIMER1_isr() {
   output_toggle(PIN_A0); // Alternar el estado del LED conectado a RA0
   set_timer1(3036);      // Recargar el timer para otro segundo
}

#INT_EXT
void EXT_isr() {
   counter++;             // Incrementar el contador cada vez que se produce una interrupción por cambio de estado
}

void main() {
   setup_oscillator(OSC_1MHZ); // Configurar el oscilador a 1 MHz

   setup_timer_1(T1_INTERNAL | T1_DIV_BY_8); // Configurar Timer1 para uso interno con prescaler 1:8
   set_timer1(3036);                         // Establecer valor inicial para desbordamiento en ~1 segundo

   enable_interrupts(INT_TIMER1);            // Habilitar interrupciones de Timer1
   enable_interrupts(INT_EXT);               // Habilitar interrupciones externas en RB0
   enable_interrupts(GLOBAL);                // Habilitar todas las interrupciones

   while(TRUE) {
       // El bucle principal se mantiene vacío; el trabajo se realiza en las ISR
   }
}

