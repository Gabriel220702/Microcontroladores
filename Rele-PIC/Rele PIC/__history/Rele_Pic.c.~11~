#include <18f4550.h>
#fuses XT,NOPROTECT,NOWDT,NOBROWNOUT,PUT,NOLVP
#use delay(internal=4MHz)

// Memoria de los puertos
#byte PORTA = 0xf80
#byte PORTB = 0xf81

// Definiciones
#DEFINE Rele PORTA,0
#DEFINE Boton PORTB,0

void main() {
   boolean start = 0;

   set_tris_a(0b11111110);  // Configura RA0 como salida (para el SSR)
   set_tris_b(0b00000001);  // Configura RB0 como entrada (para el botón)
   PORTA = 0;

   while(TRUE) {
      // Pregunta por el botón
      if(bit_test(Boton)) {
         delay_ms(200);  // Anti-Debounce
         
         // Instrucción para contabilizar una pulsación del botón
         while(bit_test(Boton)) {
            delay_ms(200);  // Anti-Debounce
         }
         
         start = !start;  // Cambia el estado lógico de start
      }
      
      // Activa o desactiva el relé (SSR)
      if(start) {
         output_high(Rele);  // Activa SSR (RA0)
      } else {
         output_low(Rele);   // Desactiva SSR (RA0)
      }
   }
}

