#include <16f877a.h>
#fuses XT, NOWDT, PUT, NOPROTECT, BROWNOUT, NOCPD, NOWRT, NODEBUG
#use delay(clock=4Mhz)
#define use_portd_lcd true
#define use_portb_kbd true
#include <lcd.c>
#include <kbd.c>
#include <stdio.h>

void main() {
    char k;
    lcd_init();
    kbd_init();
    port_b_pullups(true);

    lcd_putc("\fLeyendo Teclado\n");

    while (1) {
        k = kbd_getc();

        if (k != 0) {
            if (k == '*') {
                // Acción específica cuando se presiona '*'
                lcd_putc("\f"); // Limpia la pantalla
                lcd_putc("Leyendo Teclado\n"); // Vuelve a mostrar el mensaje inicial
                delay_ms(500); // Pequeña pausa
            } else {
                // Acción para cualquier otra tecla presionada
                lcd_putc("\f"); // Limpia la pantalla
                printf(lcd_putc, "Tecla No= %c ", k); // Muestra la tecla presionada
                delay_ms(500); // Espera para evitar rebotes y múltiples lecturas
                lcd_putc("\fLeyendo Teclado\n"); // Vuelve a mostrar el mensaje de "leyendo"
            }
        }
    }
}

